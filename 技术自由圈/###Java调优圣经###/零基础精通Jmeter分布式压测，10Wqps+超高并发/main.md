## 零基础精通Jmeter分布式压测，10Wqps+超高并发

### 本文目录
- 高并发压测的场景
- 性能测试基础
   - 1、什么是性能测试？
   - 2、性能测试的重要性
   - 3、性能指标——QPS和TPS
- 压测的时机
    - 1、上线前压测
    - 2、项目上线稳定后，对系统评估
    - 3、项目研发后期，对系统的检验
    - 4、线上出现性能问题
    - 5、合作方要求
- 压测工具介绍
    - JMeter
    - SoapUI
    - Postman
    - Selenium
    - LoadRunner
    - 为什么选择JMeter    
- Jmeter主要元件
  - 1、测试计划（Test Plan）
  - 2、线程组<Threads(Users)>
  - 3、取样器（sampler）
  - 4、逻辑控制器（Logic Controller）
  - 5、配置元件（Config Element）
  - 6、定时器（Timer）
  - 7、前置处理器（Pre Processors）
  - 8、后置处理器（Post Processors）
  - 9、断言（Assertions）
  - 10、监听器（Listener）
- 准备工作Jmeter安装
- Jmeter使用介绍
  - 使用jmeter 添加接口请求
  - 增加线程组
  - 增加HTTP请求
  - 增加察看结果树
  - 定位察看结果树中的报错情况
- Jmeter 单机压测过程
  -  1、编写压测脚本
    - 1）线程中添加HTTP信息头管理器
    - 2）线程组中添加HTTP请求默认值
    - 3）添加响应断言
    - 4）添加断言持续时间
    - 5）常数吞吐量定时器
    - 6）查看结果树
    - 7）聚合报告
  - 2、准备压测服务器（测试服务器/线上服务器）
  - 3、开始压测
  - 4、记录结果
    - 1）服务器配置
    - 3）聚合报告
    - 4）测试结果
    - 5）资源监控
  - 5、提性能Bug和验证Bug
  - 6、发送压测报告
- Jmeter 分布式压测
  - 什么是分布式测试
  - 为什么要使用分布式压力测试
  - Jmeter分布式压测前的准备工作
  - Docker 进行Jmeter 分布压力测试
    - 基础镜像Dockerfile
    - 镜像生成
    - 启动容器docker-compose
    - 两个镜像的区别
    - 执行压测
    - 查看结果
  - 10Wqps的压测实操过程

### 性能测试基础
本文从性能测试0基础开始，为大家介绍一下10Wqps+压测实操。
性能测试是一个开发工程师/架构师必会的技能之一。
***只有学会性能测试，才能根据得到的测试报告进行分析，找到系统性能的瓶颈所在，而这也是Java调优的中重要的依据***。

#### 1、什么是性能测试？
性能测试就是通过特定的方式对被测试系统按照一定测试策略施加压力，获取该系统的响应时间、TPS、吞吐量、资源利用率等性能指标，来检测系统上线后能否满足用户需求的过程。
- 性能测试就是通过特定的方式对被测试系统按照一定测试策略施加压力
- 获取该系统的响应时间、TPS、吞吐量、资源利用率等性能指标
- 来检测系统上线后能否满足用户需求的过程

#### 2、性能测试的重要性
性能测试是检验我们系统性能的重要步骤，只有经过性能测试，得到对应的测试报告，
才能根据报告中所呈现的现象（成功率、响应时长、TPS等）来进行分析，找出系统的瓶颈所在，优化系统的性能。

- 性能册数是检验我们系统性能的重要步骤
- 只有经过性能测试，得到对应的测试报告
- 才能根据报告中所呈现的现象（成功率、响应时间、TPS等）来进行分析
- 找出系统的瓶颈所在，优化系统的性能

#### 3、性能指标——QPS和TPS
QPS和TPS都是衡量一个系统性能的重要指标之一。
- ①QPS
QPS，全名 Queries Per Second，意思是“每秒查询率”，
是一台服务器每秒能够响应的查询次数，是对一个特定的查询服务器在规定时间内所处理流量多少的衡量标准。

- ②TPS
TPS 即 Transactions Per Second的缩写，每秒处理的事务数目。一个事务是指一个客户机向服务器发送请求然后服务器做出反应的过程。 
客户机在发送请求时开始计时，收到服务器响应后结束计时，以此来计算使用的时间和完成的事务个数，最终利用这些信息作出的评估分。

***Qps 基本类似于 Tps，但是不同的是，对于一个页面的一次访问，形成一个 Tps***；
***但一次页面请求，可能产生多次对服务器的请求，服务器对这些请求，就可计入“Qps”之中***。

### 压测的时机
压测的时机很重要，如果时间选择不对，可能会做无用功，简单总结下5个常见的压测场景：

#### 1、上线前压测
常规操作是在上线前，对系统进行一个摸高压测，根据预估的流量，对系统配置进行优化调整，保证运行期间，系统能正常运行。
- 常规操作是在上线前
- 对系统进行一个摸高压测
- 根据预估的流量，对系统配置进行优化调整，保证运行期间，系统能正常运行。

#### 2、项目上线稳定后，对系统评估
系统上线后，随着用户量不断增加，承受的压力会越来越大，
为了让系统在未来的时间内稳定运行，需要通过压测对系统进行评估，以调整配置或优化接口，来充分应对不断增长的用户量。

#### 3、项目研发后期，对系统的检验
在项目后期，由于领导或团队的要求，需要对系统的稳定性做校验，
保证系统短时间内流量陡增时能稳定运行，可以给系统的部署提供参考。

#### 4、线上出现性能问题
有些项目为了抢占市场，节省时间，完成了基本的功能就上线了，没有做压测，
当用户突然增加出现线上性能问题后，反过来做压测，这种情况的风险是很大的，不推荐。

#### 5、合作方要求
有些合作方对性能有明确的要求，并且写进了合同，这种情况下就必须去做压测了。

### 压测工具介绍

#### JMeter
JMeter是Apache公司基于java开发的一款开源压力测试工具，不仅体积小功能全，而且使用起来也非常方便和简单。
它是主要用于web应用程序的负载测试，同时它还支持单元测试和有限的功能测试。
- web应用程序的负载测试
- 单元测试
- 有限的功能测试

JMeter工具的特性有很多，比如动态报告、可移植性、强大的测试IDE[集成开发环境（IDE，Integrated Development Environment ）]等，
并且支持不同类型的应用程序、协议、shell脚本、Java对象和jmeter操作数据库等等。
- 动态报告
- 可移植性
- 强大的测试IDE

#### Jmeter工具的优点 ：
- 开源免费，安装过程比较简单
- Jmeter工具的应用范围比较广
- C/S架构，基于jJmeter工具有着丰富的***逻辑控制器***，且具备强大的***监控组件***
- java实现的工具，配置起来比较容易，更偏向于性能测试
- JMeter提供了BeanShell编程能力，可以编写出比较灵活的测试脚本
- JMeter提供了比较高级的扩展能力，允许自己定义和扩展新的协议支持
- JMeter的社区相对完善，可以提供丰富的协议支持

#### SoapUI
- SoapUI是一个开源测试工具，主要通过soap/http来检查、调用、实现Web Service的功能/负载/符合性测试。
- SoapUI非常流行的用于SOAP和REST的开源API测试自动化框架，同时还支持功能测试、性能测试、数据驱动测试和测试报告等。








































